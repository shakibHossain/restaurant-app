{"dependencies":[{"name":"noop-fn","data":{"isAsync":false}},{"name":"tiny-queue","data":{"isAsync":false}},{"name":"immediate","data":{"isAsync":false}},{"name":"./WebSQLResultSet","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]);function u(){return!0}function l(n,t,s,o){this.sql=n,this.args=t,this.sqlCallback=s,this.sqlErrorCallback=o}function _(n,t){function s(){n._running=!1,c(n)}var u=n._websqlDatabase._currentTask.readOnly;n._websqlDatabase._db.exec(t,u,function(u,l){if(u)return n._error=u,s();for(var _=0;_<l.length;_++){var c=l[_],f=t[_];if(c.error){if(f.sqlErrorCallback(n,c.error))return n._error=c.error,s()}else f.sqlCallback(n,(h=t[_].sql,b=c.insertId,q=c.rowsAffected,p=c.rows,/^\\s*UPDATE\\b/i.test(h)?b=void 0:/^\\s*CREATE\\s+TABLE\\b/i.test(h)?(b=0,q=0):/^\\s*DROP\\s+TABLE\\b/i.test(h)?(b=void 0,q=0):/^\\s*INSERT\\b/i.test(h)||(b=void 0),new o(b,q,p)))}var h,b,q,p;s()})}function c(n){if(!n._running&&!n._complete){if(n._error||!n._sqlQueue.length)return n._complete=!0,n._websqlDatabase._onTransactionComplete(n._error);n._running=!0;for(var t,s=[];t=n._sqlQueue.shift();)s.push(t);_(n,s)}}function f(n,t,o,u,_){n._sqlQueue.push(new l(t,o,u,_)),n._runningTimeout||(n._runningTimeout=!0,s(function(){n._runningTimeout=!1,c(n)}))}function h(s){this._websqlDatabase=s,this._error=null,this._complete=!1,this._runningTimeout=!1,this._sqlQueue=new t,s._currentTask.readOnly||this._sqlQueue.push(new l('BEGIN;',[],n,n))}h.prototype.executeSql=function(t,s,o,l){f(this,t,s=Array.isArray(s)?s:[],o='function'==typeof o?o:n,l='function'==typeof l?l:u)},h.prototype._checkDone=function(){c(this)},m.exports=h});","map":[[1,28,1,0],[1,41,3,0],[1,45,3,4,"noop"],[1,47,3,11,"require"],[1,49,3,18,"d"],[1,51,3,18],[1,55,4,4,"Queue"],[1,57,4,12,"require"],[1,59,4,19,"d"],[1,61,4,19],[1,65,5,4,"immediate"],[1,67,5,16,"require"],[1,69,5,23,"d"],[1,71,5,23],[1,75,6,4,"WebSQLResultSet"],[1,77,6,22,"require"],[1,79,6,29,"d"],[1,81,6,29],[1,85,8,0],[1,94,8,9,"errorUnhandled"],[1,98,9,2],[1,105,9,9],[1,107,38,0],[1,116,38,9,"SQLTask"],[1,118,38,17,"sql"],[1,120,38,22,"args"],[1,122,38,28,"sqlCallback"],[1,124,38,41,"sqlErrorCallback"],[1,127,39,2,"this"],[1,132,39,7,"sql"],[1,136,39,13,"sql"],[1,138,40,2,"this"],[1,143,40,7,"args"],[1,148,40,14,"args"],[1,150,41,2,"this"],[1,155,41,7,"sqlCallback"],[1,167,41,21,"sqlCallback"],[1,169,42,2,"this"],[1,174,42,7,"sqlErrorCallback"],[1,191,42,26,"sqlErrorCallback"],[1,193,45,0],[1,202,45,9,"runBatch"],[1,204,45,18,"self"],[1,206,45,24,"batch"],[1,209,47,2],[1,218,47,11,"onDone"],[1,222,48,4,"self"],[1,224,48,9,"_running"],[1,234,48,20],[1,236,49,4,"runAllSql"],[1,238,49,14,"self"],[1,241,52,2],[1,245,52,6,"readOnly"],[1,247,52,17,"self"],[1,249,52,22,"_websqlDatabase"],[1,265,52,38,"_currentTask"],[1,278,52,51,"readOnly"],[1,287,54,2,"self"],[1,289,54,7,"_websqlDatabase"],[1,305,54,23,"_db"],[1,309,54,27,"exec"],[1,314,54,32,"batch"],[1,316,54,39,"readOnly"],[1,318,54,49],[1,327,54,59,"err"],[1,329,54,64,"results"],[1,332,56,4],[1,335,56,8,"err"],[1,337,58,6],[1,344,57,6,"self"],[1,346,57,11,"_error"],[1,353,57,20,"err"],[1,355,58,13,"onDone"],[1,359,60,4],[1,363,60,9],[1,367,60,13,"i"],[1,369,60,17],[1,371,60,20,"i"],[1,373,60,24,"results"],[1,375,60,32,"length"],[1,382,60,40,"i"],[1,386,60,45],[1,387,61,6],[1,391,61,10,"res"],[1,393,61,16,"results"],[1,395,61,24,"i"],[1,398,62,10,"batchTask"],[1,400,62,22,"batch"],[1,402,62,28,"i"],[1,405,63,6],[1,408,63,10,"res"],[1,410,63,14,"error"],[1,417,64,8],[1,420,64,12,"batchTask"],[1,422,64,22,"sqlErrorCallback"],[1,439,64,39,"self"],[1,441,64,45,"res"],[1,443,64,49,"error"],[1,450,67,10],[1,457,66,10,"self"],[1,459,66,15,"_error"],[1,466,66,24,"res"],[1,468,66,28,"error"],[1,474,67,17,"onDone"],[1,483,70,8,"batchTask"],[1,485,70,18,"sqlCallback"],[1,497,70,30,"self"],[1,500,17,26,"sql"],[1,502,71,10,"batch"],[1,504,71,16,"i"],[1,507,71,19,"sql"],[1,511,17,31,"insertId"],[1,513,71,24,"res"],[1,515,71,28,"insertId"],[1,524,17,41,"rowsAffected"],[1,526,71,38,"res"],[1,528,71,42,"rowsAffected"],[1,541,17,55,"rows"],[1,543,71,56,"res"],[1,545,71,60,"rows"],[1,550,18,6],[1,566,18,22,"test"],[1,571,18,27,"sql"],[1,574,20,4,"insertId"],[1,581,20,12,"undefined"],[1,583,21,13],[1,607,21,37,"test"],[1,612,21,42,"sql"],[1,616,23,4,"insertId"],[1,618,23,15],[1,620,24,4,"rowsAffected"],[1,622,24,19],[1,625,25,13],[1,647,25,35,"test"],[1,652,25,40,"sql"],[1,656,28,4,"insertId"],[1,663,28,12,"undefined"],[1,665,29,4,"rowsAffected"],[1,667,29,19],[1,670,30,14],[1,686,30,30,"test"],[1,691,30,35,"sql"],[1,696,33,4,"insertId"],[1,703,33,12,"undefined"],[1,706,35,9],[1,710,35,13,"WebSQLResultSet"],[1,712,35,29,"insertId"],[1,714,35,39,"rowsAffected"],[1,716,35,53,"rows"],[1,721,17,0],[1,725,17,26,"sql"],[1,727,17,31,"insertId"],[1,729,17,41,"rowsAffected"],[1,731,17,55,"rows"],[1,733,74,4,"onDone"],[1,739,78,0],[1,748,78,9,"runAllSql"],[1,750,78,19,"self"],[1,753,79,2],[1,757,79,6,"self"],[1,759,79,11,"_running"],[1,770,79,23,"self"],[1,772,79,28,"_complete"],[1,782,79,2],[1,783,82,2],[1,786,82,6,"self"],[1,788,82,11,"_error"],[1,797,82,22,"self"],[1,799,82,27,"_sqlQueue"],[1,809,82,37,"length"],[1,816,84,4],[1,823,83,4,"self"],[1,825,83,9,"_complete"],[1,836,83,21],[1,838,84,11,"self"],[1,840,84,16,"_websqlDatabase"],[1,856,84,32,"_onTransactionComplete"],[1,879,84,55,"self"],[1,881,84,60,"_error"],[1,889,86,2,"self"],[1,891,86,7,"_running"],[1,901,86,18],[1,903,89,2],[1,907,87,2],[1,911,88,6,"task"],[1,913,87,6,"batch"],[1,918,89,10,"task"],[1,920,89,17,"self"],[1,922,89,22,"_sqlQueue"],[1,932,89,32,"shift"],[1,941,90,4,"batch"],[1,943,90,10,"push"],[1,948,90,15,"task"],[1,951,92,2,"runBatch"],[1,953,92,11,"self"],[1,955,92,17,"batch"],[1,959,95,0],[1,968,95,9,"executeSql"],[1,970,95,20,"self"],[1,972,95,26,"sql"],[1,974,95,31,"args"],[1,976,95,37,"sqlCallback"],[1,978,95,50,"sqlErrorCallback"],[1,981,96,2,"self"],[1,983,96,7,"_sqlQueue"],[1,993,96,17,"push"],[1,998,96,22],[1,1002,96,26,"SQLTask"],[1,1004,96,34,"sql"],[1,1006,96,39,"args"],[1,1008,96,45,"sqlCallback"],[1,1010,96,58,"sqlErrorCallback"],[1,1014,97,6,"self"],[1,1016,97,11,"_runningTimeout"],[1,1034,100,2,"self"],[1,1036,100,7,"_runningTimeout"],[1,1053,100,25],[1,1055,101,2,"immediate"],[1,1057,101,12],[1,1068,102,4,"self"],[1,1070,102,9,"_runningTimeout"],[1,1087,102,27],[1,1089,103,4,"runAllSql"],[1,1091,103,14,"self"],[1,1097,107,0],[1,1106,107,9,"WebSQLTransaction"],[1,1108,107,27,"websqlDatabase"],[1,1111,108,2,"this"],[1,1116,108,7,"_websqlDatabase"],[1,1132,108,25,"websqlDatabase"],[1,1134,109,2,"this"],[1,1139,109,7,"_error"],[1,1146,109,16],[1,1151,110,2,"this"],[1,1156,110,7,"_complete"],[1,1167,110,19],[1,1169,111,2,"this"],[1,1174,111,7,"_runningTimeout"],[1,1191,111,25],[1,1193,112,2,"this"],[1,1198,112,7,"_sqlQueue"],[1,1208,112,19],[1,1212,112,23,"Queue"],[1,1214,113,7,"websqlDatabase"],[1,1216,113,22,"_currentTask"],[1,1229,113,35,"readOnly"],[1,1239,116,4,"this"],[1,1244,116,9,"_sqlQueue"],[1,1254,116,19,"push"],[1,1259,116,24],[1,1263,116,28,"SQLTask"],[1,1265,116,36],[1,1277,116,50,"noop"],[1,1279,116,56,"noop"],[1,1283,120,0,"WebSQLTransaction"],[1,1285,120,18,"prototype"],[1,1295,120,28,"executeSql"],[1,1306,120,41],[1,1315,120,51,"sql"],[1,1317,120,56,"args"],[1,1319,120,62,"sqlCallback"],[1,1321,120,75,"sqlErrorCallback"],[1,1324,125,2,"executeSql"],[1,1326,125,13,"this"],[1,1331,125,19,"sql"],[1,1333,121,2,"args"],[1,1335,121,9,"Array"],[1,1341,121,15,"isArray"],[1,1349,121,23,"args"],[1,1352,121,31,"args"],[1,1357,122,2,"sqlCallback"],[1,1359,122,39],[1,1378,122,23,"sqlCallback"],[1,1380,122,52,"sqlCallback"],[1,1382,122,66,"noop"],[1,1384,123,2,"sqlErrorCallback"],[1,1386,123,49],[1,1405,123,28,"sqlErrorCallback"],[1,1407,123,62,"sqlErrorCallback"],[1,1409,123,81,"errorUnhandled"],[1,1413,128,0,"WebSQLTransaction"],[1,1415,128,18,"prototype"],[1,1425,128,28,"_checkDone"],[1,1436,128,41],[1,1447,129,2,"runAllSql"],[1,1449,129,12,"this"],[1,1456,132,0,"module"],[1,1458,132,7,"exports"],[1,1466,132,17,"WebSQLTransaction"]]},"type":"js/module"}]}